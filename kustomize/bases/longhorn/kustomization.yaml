apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

helmCharts:
  - name: longhorn
    repo: https://charts.longhorn.io
    releaseName: longhorn
    namespace: longhorn
    additionalValuesFiles:
      - values-upstream.yaml
      - values.yaml
    version: 1.5.2

resources: []

# the `backendStoreDriver` field is first introduced in 1.5.0 and it is missing on the helm chart.
# https://longhorn.io/docs/1.5.3/references/storage-class-parameters/#backend-store-driver-field-parametersbackendstoredriver
patches:
  - target:
      kind: ConfigMap
      name: longhorn-storageclass
    path: storageclass-cm.yaml
